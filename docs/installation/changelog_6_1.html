<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Berkeley DB Library Version 12.1.6.1 Change Log</title>
    <link rel="stylesheet" href="gettingStarted.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="start" href="index.html" title="Berkeley DB Installation and Build Guide" />
    <link rel="up" href="upgrade_61_toc.html" title="Chapter 9.  Upgrading Berkeley DB 12.1.6.0 applications to Berkeley DB 12.1.6.1" />
    <link rel="prev" href="dropsupp61.html" title="Dropped Support" />
    <link rel="next" href="upgrade_60_toc.html" title="Chapter 10.  Upgrading Berkeley DB 11.2.5.3 applications to Berkeley DB 12.1.6.0" />
  </head>
  <body>
    <div xmlns="" class="navheader">
      <div class="libver">
        <p>Library Version 12.1.6.1</p>
      </div>
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">Berkeley DB Library Version 12.1.6.1 Change Log</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="dropsupp61.html">Prev</a> </td>
          <th width="60%" align="center">Chapter 9.  Upgrading Berkeley DB 12.1.6.0 applications to Berkeley DB 12.1.6.1 </th>
          <td width="20%" align="right"> <a accesskey="n" href="upgrade_60_toc.html">Next</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title" style="clear: both"><a id="changelog_6_1"></a>Berkeley DB Library Version 12.1.6.1 Change Log</h2>
          </div>
        </div>
      </div>
      <div class="toc">
        <dl>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483112896">Changes between 12.1.6.1.36 and 12.1.6.1.38</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483091376">Changes between 12.1.6.1.29 and 12.1.6.1.36</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483227152">Changes between 12.1.6.1.26 and 12.1.6.1.29</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483118704">Changes between 12.1.6.1.23 and 12.1.6.1.26</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483088480">Changes between 12.1.6.1.20 and 12.1.6.1.23</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483094256">Changes between 12.1.6.1.19 and 12.1.6.1.20</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483088352">Database or Log File On-Disk Format Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483083856">New Features/Improvements</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483083088">Database Environment Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483036880">Concurrent Data Store Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483035248">Access Method Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483028464">API Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483024416">SQL-specific API Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483022976">Tcl-specific API Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483085152">Java-specific API Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483062096">C#-specific API Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483015664">C++-specific API Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483013728">Replication Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483010000">Locking Subsystem Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483005280">Logging Subsystem Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483003520">Memory Pool Subsystem Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578482997440">Mutex Subsystem Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578482995808">Transaction Subsystem Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578482994208">Test Suite Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578482992768">Utility Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578482990112">Configuration, Documentation, Sample Apps, Portability and Build Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578482988672">Example Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578482987040">Miscellaneous Bug Fixes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578483018880">Platform Certification Changes</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578482978752">Deprecated Features</a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="changelog_6_1.html#idm140578482977120">Known Bugs</a>
            </span>
          </dt>
        </dl>
      </div>
      <p>
        This is the changelog for Berkeley DB
        12<span class="emphasis"><em>c</em></span> Release 1 (library
        version 12.1.6.1).
    </p>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483112896"></a>Changes between 12.1.6.1.36 and 12.1.6.1.38</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Fixed some compiler warnings in db_conv.c. [#25086]
            </p>
            </li>
            <li>
              <p>
 Fixed some null pointer crashes in the Tcl layer. [#26331]
            </p>
            </li>
            <li>
              <p>
 Improved stability with several changes that prevent crashes when running db_verify against corrupt files. [#27088]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483091376"></a>Changes between 12.1.6.1.29 and 12.1.6.1.36</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Increased the number of instances in which failchk can successfully clean the environment without requiring full recovery after a thread crashes while using Berkeley DB. [#25087]
            </p>
            </li>
            <li>
              <p>
 Improved db_verify's handling of corrupted database files. [#25239]
            </p>
            </li>
            <li>
              <p>
 Fixed configure bug which prevented shared library support on FreeBSD 10. [#25251]
            </p>
            </li>
            <li>
              <p>
 Added PRAGMA statistics, which prints out statistics about the database and its environment. [#25550]
            </p>
            </li>
            <li>
              <p>
 Added PRAGMA statistics_files, which redirects output from the statistics PRAGMA to a file. [#25550]
            </p>
            </li>
            <li>
              <p>
 Internal Berkeley DB messages are now redirected to the same file where internal Berkeley DB error messages are redirected. [#25568]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that could cause a client undergoing internal initialization to fail to request all the necessary logs for a correct recovery.  The major symptom of this bug was that some client database files were left with empty pages that would later cause log sequence errors or other failures. [#25624]
            </p>
            </li>
            <li>
              <p>
 Fixed a blob files related crash in db_verify. [#25920]
            </p>
            </li>
            <li>
              <p>
 When opening a database handle which was created outside of an environment, if the current working directory contains a DB_CONFIG file it will no longer be processed.  [#26319]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483227152"></a>Changes between 12.1.6.1.26 and 12.1.6.1.29</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Fixed a bug where opening or renaming a compressed in-memory database may fail with the error "BDB1565 DB-&gt;set_bt_compress: method not permitted after handle's open method". [#22055][#22056]
            </p>
            </li>
            <li>
              <p>
 Fixed a crash when joining compressed databases. [#22058]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where a join cursor may miss the first matching pair when the database is compressed. [#22062]
            </p>
            </li>
            <li>
              <p>
 Fixed two potential lock leaks in database compaction. [#23725]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that can cause a DB_PAGE_NOTFOUND error during btree compaction. [#23853]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where setting DatabaseEnvironmentConfig.Register had no effect. [#24094]
            </p>
            </li>
            <li>
              <p>
 Improved the configure scripts for Mac OS X. [#24139]
            </p>
            </li>
            <li>
              <p>
 The JDBC jar file (sqlite.jar) is now installed in the "lib" directory instead of "jar" on *nix systems. [#24139]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug in BDB SQL where adding a replication site immediately after opening the master environment could cause the add site operation to hang.  Also fixed a bug that caused BDB SQL to lose its encryption settings when turning replication on or off on an existing environment. [#24327]
            </p>
            </li>
            <li>
              <p>
 Enhanced the vote comparison routine used to select a new master. [#24433]
            </p>
            </li>
            <li>
              <p>
 Fixed a crash which could occur when maximum count of lockers is reached. [#24470]
            </p>
            </li>
            <li>
              <p>
 Fixed a potential memory error when executing a SQL query. [#24471]
            </p>
            </li>
            <li>
              <p>
 One single transaction is now used to manage blob handles for tables that contain blobs. [#24549]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that may cause an environment panic when the number of lock table partitions is too large. [#24554]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where MultipleRecnoDataEntry did not encode record-number-data pairs correctly with append(). [#24555]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that may cause DBcursor-&gt;put to crash when DB_AFTER is set. [#24572]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where Database.setConfig() may incorrectly throw an exception. [#24585]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that caused mixed-version replication live upgrades from releases prior to 6.0 to fail with an EEXIST error when in-memory databases are present.  [#24597]
            </p>
            </li>
            <li>
              <p>
 Corrected error paths which could cause a spurious panic when attempting to unlock a mutex that was not locked. [#24606]
            </p>
            </li>
            <li>
              <p>
 When an attempt to flush a file from the memory pool fails, add an error message that includes the file name. It is likely that the file was removed or altered outside of the control of Berkeley DB. [#24606]
            </p>
            </li>
            <li>
              <p>
 Removed a potential race condition when three or more threads attempt to split adjacent pages in a btree. [#24733]
            </p>
            </li>
            <li>
              <p>
 Added additional page verifications into db_verify to prevent possible SEGV errors when verifying extremely corrupted database files. [#24754]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where DB_ENV-&gt;open() would fail when DB_ENV-&gt;set_memory_max() was called on a 32-bit system. [#24783]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where an application might hang because it could not obtain a TAS lock when running Linux on the SPARC architecture. [#24805]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that may cause a crash when working with sequences. [#24826]
            </p>
            </li>
            <li>
              <p>
 Fixed a crash when closing a connection to a database with sequences. [#24827]
            </p>
            </li>
            <li>
              <p>
 BLOB files and encryption can now be enabled together.  Note that only the data stored in the database will be encrypted; the data in the BLOB files will remain unencrypted.  [#24849]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that may cause a segmentation fault when multiple database handles are opened on the same database in the same transaction. [#24857]
            </p>
            </li>
            <li>
              <p>
 Fixed the error "BDB0232 Error opening blob file" when using the SQL API with PRAGMA large_record_opt enabled. [#24895]
            </p>
            </li>
            <li>
              <p>
 Added a new utility program db_convert. [#25086]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483118704"></a>Changes between 12.1.6.1.23 and 12.1.6.1.26</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 A 'salvage' (db_dump -r) no longer hangs on a corrupt database which contains a loop in an overflow item's chain of pages. [#18550]
            </p>
            </li>
            <li>
              <p>
 Remove +u1 compiler flag from the HP-UX build and fixed related alignment issue.  [#23739]
            </p>
            </li>
            <li>
              <p>
 Fixed DB_RUNRECOVERY errors caused by pthreads-based mutexes. [#23965]
            </p>
            </li>
            <li>
              <p>
 Allow the failchk process to call __env_refresh when necessary. [#24194] ` DB-&gt;open() now detects invalid pagesizes sooner, avoiding a potential floating point exception when a purported database file has a pagesize of 0. Added a pre-verify step to the db_dump utility. [#24217]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that can cause DBcursor-&gt;get to return incorrect data when DB_GET_BOTH_RANGE flag is used. [#24220.1]
            </p>
            </li>
            <li>
              <p>
 Added support for Java 8. [#24220.2]
            </p>
            </li>
            <li>
              <p>
 Aborting a transaction no longer panics if a deadlock error occurs while freeing up the transaction's cursors. [#24223]
            </p>
            </li>
            <li>
              <p>
 Fixed a crash which could occur when multiple BDB SQL processes repeatedly open a database file. [#24230]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where db_printlog improperly handled a "No such file or directory" error condition. [#24265]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that could cause a master crash in the following cases: an unencrypted client attempts to join an encrypted replication group, or an encrypted client attempts to join an unencrypted replication group. [#24288]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that can cause a crash when DB_ENV-&gt;memp_stat() is called. [#24298]
            </p>
            </li>
            <li>
              <p>
 Added support for arm64. [#24312]
            </p>
            </li>
            <li>
              <p>
 Reduced the minimum hash table size. [#24314].
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where file names were not displayed correctly when a file failed to open during backup. [#24340]
            </p>
            </li>
            <li>
              <p>
 Enabled cross compiling the JDBC driver. [#24347]
            </p>
            </li>
            <li>
              <p>
 Fixed a crash when writing to a SQL BLOB while txn_bulk is enabled. [#24351]
            </p>
            </li>
            <li>
              <p>
 DB-&gt;open() now detects invalid bt_minkey better, avoiding a potential floating point excetpion. [#24398]
            </p>
            </li>
            <li>
              <p>
 Removed EnvironmentConfig.setTxnNotDurable() and Environment.getTxnNotDurable() from the Java API. This flag cannot be set on environments. [#24416]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483088480"></a>Changes between 12.1.6.1.20 and 12.1.6.1.23</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Fixed a bug that was preventing PRAGMA cache_size from changing the size of the cache.  [#24206]
            </p>
            </li>
            <li>
              <p>
 Fixed a recovery bug that could cause files to end up in the wrong directory when using logs created in 5.3 or earlier. [#24169]
            </p>
            </li>
            <li>
              <p>
 Creating a table in SQL will no longer fail if the database connection was opened without the SQLITE_OPEN_CREATE flag. [#24115]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where an error message was not displayed back to the user correctly when sequence creation failed. [#24103]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where BDB was not handling tables with multiple BLOB columns when using the SQL API. [#24092]
            </p>
            </li>
            <li>
              <p>
 SQL sequence names are now case insensitive except when surrounded by quotation marks. [#23964]
            </p>
            </li>
            <li>
              <p>
 Avoid incrementing the statistic DB_LOG_STAT.st_scount ("Total log file flushes") when DB_LOG_NOSYNC is in effect. [#23945]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that may lead to crash when opening multiple environments in a multi-threaded program. [#23913]
            </p>
            </li>
            <li>
              <p>
 Improved the way we mark a password as consumed.  [#23876]
            </p>
            </li>
            <li>
              <p>
 Fixed the error "BDB2074 No space available in latch table" for configurations using plain pthreads mutexes and DB_ENV-&gt;set_thread_count(). Susceptible configurations include the definition of HAVE_MUTEX_PTHREADS in db_config.h but do not define HAVE_MUTEX_HYBRID.  [#23831]
            </p>
            </li>
            <li>
              <p>
 Fixed a crash when MVCC and snapshot isolation are used and the system is under heavy load. [#23815]
            </p>
            </li>
            <li>
              <p>
 Fixed a problem with closing a panicked environment, in which an infinite loop was possible. [#23814]
            </p>
            </li>
            <li>
              <p>
 Removed Java 5 targets from Windows builds and javadoc production. [#23811]
            </p>
            </li>
            <li>
              <p>
 Support for client-to-client replication of BLOB data during internal initialization has been disabled. [#23748]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that may cause self-deadlock during database compaction. [#23725]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug in the recovery of a truncated hash database. [#23772]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483094256"></a>Changes between 12.1.6.1.19 and 12.1.6.1.20</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Fixed a sqlite3odbc bug which may return an out-of-memory error when calling SQLGetData() on empty long columns. [#22777]
            </p>
            </li>
            <li>
              <p>
 Enabling BLOB support and master leases will no longer result in unexpected DB_REP_LEASE_EXPIRED errors. [#23275]
            </p>
            </li>
            <li>
              <p>
 Fixed a race condition when BLOB support is enabled with replication where message handling could fail with an ENOENT error. [#23275]
            </p>
            </li>
            <li>
              <p>
 Existing SQL databases will have to be reindexed after upgrading to this release.  No actions are required for non-SQL databases. Check the upgrade documentation for more details. [#23469]
            </p>
            </li>
            <li>
              <p>
 Fixed a known bug in SQL where ORDER BY could return results out of order if an index is used to answer the query. [#23469]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that causes a crash when opening a corrupted environment with encryption and DB_REGISTER. [#23643]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that causes a crash when opening a corrupted environment with DB_FAILCHK using a BDB compiled with DIAGNOSTIC defined. [#23643]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where closing a panicked environment raised an access violation and crashed the program. [#23679]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where db_verify did not verify multiple files correctly. [#23692]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that causes a site joining a replication group to hang or to only partially complete the internal steps necessary to join the replication group. [#23750]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483088352"></a>Database or Log File On-Disk Format Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 The log file format changed in 12.1.6.1.
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483083856"></a>New Features/Improvements</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Demonstrated in a sample app how to use thread-specific structures to associate a DB_EVENT_REP_PERM_FAILED event with the transaction that caused it. [#17686]
            </p>
            </li>
            <li>
              <p>
 Replication Manager Preferred Master is a new option for 2-site replication groups.  One site is the preferred master, which assumes the master role as much of the time as its availability permits.  A preferred master replication group guarantees that transactions committed on the preferred master site will never be rolled back while also providing client failover. [#20230]
            </p>
            </li>
            <li>
              <p>
 A new flag DB_FORCESYNCENV is provided for DB_ENV-&gt;close(), which forces flushing the memory mapped regions before unmapping them. [#21176]
            </p>
            </li>
            <li>
              <p>
 A new API is provided to limit the Replication Manager incoming queue based on the amount of heap memory it uses. [#21481]
            </p>
            </li>
            <li>
              <p>
 BLOB support is now available for environments configured for replication. [#22359]
            </p>
            </li>
            <li>
              <p>
 A new version of DB_ENV-&gt;failchk() helps supports multi-process environments which use DB_REGISTER rather than a monitoring process. It is turned on with --enable-failchk_broadcast. [#22419]
            </p>
            </li>
            <li>
              <p>
 Added support for Visual Studio 2012. [#22477]
            </p>
            </li>
            <li>
              <p>
 CPU time needed for database backups is now reduced. [#22967]
            </p>
            </li>
            <li>
              <p>
 Added BDB utilities for the Android platform. [#23079]
            </p>
            </li>
            <li>
              <p>
 Added --enable-error_history support.  This diagnostic tool prints a stack trace when a panic occurs. [#23119]
            </p>
            </li>
            <li>
              <p>
 The new log configuration option DB_LOG_NOSYNC has been added to avoid flushing the transaction log in order to stabilize storage. This can be useful when durability across system crashes is unnecessary and all the transactions in the environment specify either the DB_TXN_NOSYNC or DB_TXN_WRITE_NOSYNC flag. This configuration setting may be made by DB_ENV-&gt;log_set_config() or a DB_CONFIG line "db_log_nosync [on|off]". [#23191]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483083088"></a>Database Environment Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Fixed a problem with DB_LOCKDOWN which would cause an mlock error ENOMEM on some operating systems. [#21379]
            </p>
            </li>
            <li>
              <p>
 DB_ENV-&gt;close() now detaches from the environment's mmap and shared memory regions even when a panic error (DB_RUNRECOVERY) has been returned. DB_ENV-&gt;open(DB_REGISTER) detects whether a panic has occurred in the environment. If so it returns DB_RUNRECOVERY. Prior to this, the panic state was not detected, which might have caused a hang. [#22805]
            </p>
            </li>
            <li>
              <p>
 Ensure that the size of memory mapped backing files are a multiple of the system pagesize. Previously the files were aligned up to 8KB boundaries, which was not adequate for systems with a 64KB pagesize. [#23290]
            </p>
            </li>
            <li>
              <p>
 Improved the sizing of the environment region to better match the needs of thread tracking as specified by DB_ENV-&gt;set_thread_count(). [#24314]
            </p>
            </li>
            <li>
              <p>
 Include a new field in the per-thread statistics output: the number of locked mutexes. [#25690]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483036880"></a>Concurrent Data Store Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 -None
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483035248"></a>Access Method Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Fixed a bug that left behind obsolete queue extents. [#21988]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that occurred if the range keys did not fit within one database page during database partition opening. [#22280]
            </p>
            </li>
            <li>
              <p>
 Corrected a buffer mutex deadlock involving off-page duplicate sets and less than full transactional isolation levels. [#22532]
            </p>
            </li>
            <li>
              <p>
 Fixed a byte swapping bug that could corrupt the header of heap database pages. [#23318]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483028464"></a>API Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Make flag checking in sequence stat print API consistent with the other stat print APIs. [#22513]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483024416"></a>SQL-specific API Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Fixed a bug that was preventing old log files from being removed while using the SQL API. [#22521]
            </p>
            </li>
            <li>
              <p>
 Updated SQL API build to be compatible with SQLite 3.8.3.1. [#23178]
            </p>
            </li>
            <li>
              <p>
 Updated ADO.NET API to be compatible with System.Data.SQLite 1.0.91.0. [#23446]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483022976"></a>Tcl-specific API Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Exposed flag DB_SET_MUTEX_FAILCHK_TIMEOUT in Tcl API. [#23163]
            </p>
            </li>
            <li>
              <p>
 Added msgfile and msgfile_close in the Tcl API. [#31881].
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483085152"></a>Java-specific API Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Exposed DB-&gt;set_msgfile(), DB_ENV-&gt;set_msgfile() and all xxx_stat_print() in Java API.[#22691]
            </p>
            </li>
            <li>
              <p>
 Exposed flags DB_REPMGR_CONF_PREFMAS_MASTER and DB_REPMGR_CONF_PREFMAS_CLIENT in Java API. [#23163]
            </p>
            </li>
            <li>
              <p>
 Exposed new flag DB_LOG_NOSYNC in Java API. [#23191]
            </p>
            </li>
            <li>
              <p>
 Updated DPL changes from BDB JE. [#23251]
            </p>
            </li>
            <li>
              <p>
 Exposed new flag DB_EVENT_REP_INQUEUE_FULL in Java API. [#23280]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that partition directories could not be set correctly via Java API. [#23410]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483062096"></a>C#-specific API Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 The class LockDetectMode has been removed. It was duplicating functionality provided in other classes and not being used. [#21248]
            </p>
            </li>
            <li>
              <p>
 Exposed DB_STAT_ALLOC in PrintLockingSystemStats(), PrintLoggingSystemStats(), PrintMPoolSystemStats(), PrintMutexSystemStats(), PrintStats() and PrintTransactionSystemStats(). [#22513]
            </p>
            </li>
            <li>
              <p>
 Exposed DB-&gt;set_msgcall(), DB-&gt;set_msgfile(), DB_ENV-&gt;set_msgcall() and DB_ENV-&gt;set_msgfile() to C# API. [#22799]
            </p>
            </li>
            <li>
              <p>
 Exposed flags DB_REPMGR_CONF_PREFMAS_MASTER and DB_REPMGR_CONF_PREFMAS_CLIENT in C# API. [#23163]
            </p>
            </li>
            <li>
              <p>
 Exposed new flag DB_LOG_NOSYNC in C# API. [#23191]
            </p>
            </li>
            <li>
              <p>
 Exposed new flag DB_EVENT_REP_INQUEUE_FULL in C# API. [#23280]
            </p>
            </li>
            <li>
              <p>
 Changed definition of all structs to make SWIG 2.0.12 can generate code successfully. [#23295]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483015664"></a>C++-specific API Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Fixed a bug that db_stl library could not build using gcc-4.7 or later versions. [#22615]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483013728"></a>Replication Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Fixed a bug where, after some rare multiple-site failure scenarios including transaction rollbacks, Replication Manager could have incorrectly determined that new transactions fulfilled the acknowledgement policy. [#16624]
            </p>
            </li>
            <li>
              <p>
 Acknowledgements are counted more precisely when an unelectable client is first joining the replication group and also when a master has been set to be unelectable. [#20825]
            </p>
            </li>
            <li>
              <p>
 If there is already a replication process running, do not require a flag value when calling DB_ENV-&gt;repmgr_start() to start a subordinate process. [#20980]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that a site could not rejoin the replication group on Windows after being removed from the group. [#22460]
            </p>
            </li>
            <li>
              <p>
 When a removed site rejoins a two-site replication group with DB_REPMGR_CONF_2SITE_STRICT turned off, defer its election so that the rejoining site does not prematurely elect itself master with only its own vote when the other site is already master. [#22683]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where a Replication Manager subordinate process could fail its automatic takeover as the replication process because it is unnecessarily waiting for acknowledgements from other sites before the connections to these sites are properly established. [#22998]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where a client synchronization could get stuck because certain error paths were failing to release an internal lockout. [#23169]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug where replication group-aware log archiving might have unnecessarily kept log files after certain connection sequences between sites. [#23420]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483010000"></a>Locking Subsystem Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 None
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483005280"></a>Logging Subsystem Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Avoid incrementing the statistic DB_LOG_STAT.st_scount ("Total log file flushes") when DB_LOG_NOSYNC is in effect. [#23945]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483003520"></a>Memory Pool Subsystem Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 None
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578482997440"></a>Mutex Subsystem Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Removed an environment handle mutex which was no longer needed. [#23099]
            </p>
            </li>
            <li>
              <p>
 Removed the last source files of the defunct fcntl mutex implementation. [#23119]
            </p>
            </li>
            <li>
              <p>
 Fix a race condition which might allow DB_ENV-&gt;failchk() to hang after it had freed a locker ID. [#24194]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578482995808"></a>Transaction Subsystem Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 None
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578482994208"></a>Test Suite Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 None
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578482992768"></a>Utility Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 None
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578482990112"></a>Configuration, Documentation, Sample Apps, Portability and Build Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Fixed a bug that ex_rep_base could not quit gracefully after receiving 'exit' command. [#16871]
            </p>
            </li>
            <li>
              <p>
 Extended the ex_rep_mgr Replication Manager sample application to demonstrate the use of a thread-specific structure to associate a DB_EVENT_REP_PERM_FAILED event with its originating transaction. [#17686]
            </p>
            </li>
            <li>
              <p>
 Parameter "-module" is removed from task libsqilte_jni in JDBC makefile. So libsqlite_jni library could be built in '.dylib' format on Mac OS X. [#22937]
            </p>
            </li>
            <li>
              <p>
 Additional information about the cause of an error may now be displayed by configuring with --enable-error_history. [#23119]
            </p>
            </li>
            <li>
              <p>
 Add one public error code 'DB_META_CHKSUM_FAIL'. [#23304]
            </p>
            </li>
            <li>
              <p>
 Added build support on latest MinGW. [#23332]
            </p>
            </li>
            <li>
              <p>
 A configuration warning 'Ignoring --with-cryptography flag value' is added for the non-crypto package. [#23333]
            </p>
            </li>
            <li>
              <p>
 Parameter LIBSQLSO_LIBS is added to the task libsqlso_target to workaround a linking issue with the gcc 4.8.1 distributed by Ubuntu. [#23372]
            </p>
            </li>
            <li>
              <p>
 Extended the Mac OS X section in the chapter 7 of the installation guide. [#23388]
            </p>
            </li>
            <li>
              <p>
 Fixed PHP module to consistently use the ZEND_REGISTER_RESOURCE macro, preventing a build failure with PHP 5.5.  Updated INSTALL file to note the changed location of sample output. [#23391]
            </p>
            </li>
            <li>
              <p>
 Fixed a few typos in the JDBC/ODBC sections of the Windows/Unix installation guide. [#23404]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578482988672"></a>Example Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Added an example using BDB SQL with the JDBC driver and ADF. [#22569]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578482987040"></a>Miscellaneous Bug Fixes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Fixed a byte swapping bug with log file operations on blob files. [#22215]
            </p>
            </li>
            <li>
              <p>
 Fixed test failures on QNX with small mutex regions.  [#22310]
            </p>
            </li>
            <li>
              <p>
 Database containing BLOBS are now portable between machines of opposite endianness.  [#22455]
            </p>
            </li>
            <li>
              <p>
 Added a -D option to display output for db_dump and db_printlog. This value takes priority over DB_ENV-&gt;set_data_len() if that was called to set the length.  [#22485]
            </p>
            </li>
            <li>
              <p>
 Updates to PHP API to handle functional changes in PHP 5.4.  [#22549]
            </p>
            </li>
            <li>
              <p>
 Fixed heap databases so they can work on both big and little endian machines.  [#22929]
            </p>
            </li>
            <li>
              <p>
 Restructure the blob delete code to improve performance. [#22935]
            </p>
            </li>
            <li>
              <p>
 Properly clean up blob meta database after aborting the creation of its parent database. [#23000]
            </p>
            </li>
            <li>
              <p>
 Fixed memory alignment issues with the DB_MPOOL stats. [#23150]
            </p>
            </li>
            <li>
              <p>
 Fixed a byte swapping bug with heap blob log records. [#23319]
            </p>
            </li>
            <li>
              <p>
 Fixed two race condition bugs with DB_ENV-&gt;failchk(). [#23347]
            </p>
            </li>
            <li>
              <p>
 Fixed memory alignment issue on Solaris. [#23571]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that using Visual Studio 2010 and JDK 1.5 could generate corrupted jar files. [#23574]
            </p>
            </li>
            <li>
              <p>
 Fixed a bug that specifying --with-cryptography=yes did not build the jdbc library correctly. [#23606]
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578483018880"></a>Platform Certification Changes</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 Berkeley DB no longer tests or certifies Windows XP or Windows 2003.
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578482978752"></a>Deprecated Features</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 The DB_AUTO_COMMIT flag is present in the DB_SEQUENCE APIs for Java and C#.   This flg is no longer meaningful for these APIs and will be deprecated in the next release.
            </p>
            </li>
          </ol>
        </div>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="idm140578482977120"></a>Known Bugs</h3>
            </div>
          </div>
        </div>
        <div class="orderedlist">
          <ol type="1">
            <li>
              <p>
 [#23469] (Fixed in 12.1.6.1.20 -- see above.) The SQL ORDER BY command on the primary key of a table can in rare cases return the results out of order if an index search is used in executing the query.  For example: Create a single column table.  Insert two rows with identical values.  A query on the row id and the column will produce results in a different order depending on whether an index is used.
            </p>
            </li>
          </ol>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="dropsupp61.html">Prev</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="upgrade_61_toc.html">Up</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="upgrade_60_toc.html">Next</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">Dropped Support </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Home</a>
          </td>
          <td width="40%" align="right" valign="top"> Chapter 10.  Upgrading Berkeley DB 11.2.5.3 applications to Berkeley DB 12.1.6.0 </td>
        </tr>
      </table>
    </div>
  </body>
</html>
